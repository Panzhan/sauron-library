{"version":3,"file":"accurate.esm.js","sources":["../src/index.ts"],"sourcesContent":["type Handler = (n1: any, n2: any) => number;\n\n/**\n * 获取小数位长度\n *\n * @param num 数字\n */\nfunction getDecimalLength(num: number): number {\n  try {\n    return num.toString().split('.')[1].length;\n  } catch (e) {\n    return 0;\n  }\n}\n\n/**\n * 判断是否是数字\n *\n * 举例：\n * isNumber(1) // true\n * isNumber('1') // true\n * ---------------------\n * isNumber() // false\n * isNumber('') // false\n * isNumber(true) // false\n * isNumber(null) // false\n * isNumber(NaN) // false\n * isNumber('1px') // false\n *\n * @param num 数字\n */\nfunction isNumber(num: any): boolean {\n  return !Number.isNaN(Number(num)) && !Number.isNaN(Number.parseFloat(num));\n}\n\n/**\n * 包装函数\n *\n * @param n1 数值1\n * @param n2 数值2\n * @param handler 处理函数\n * @throws {TypeError}\n */\nfunction layer(n1: any, n2: any, handler: Handler): number {\n  if (!isNumber(n1)) {\n    throw new TypeError('The first parameter is not a number');\n  }\n\n  if (typeof n2 === 'undefined') {\n    return Number(n1);\n  }\n\n  if (!isNumber(n2)) {\n    throw new TypeError('The second parameter is not a number');\n  }\n\n  return handler(Number(n1), Number(n2));\n}\n\n/**\n * 乘法运算\n *\n * @param n1 被乘数\n * @param n2 乘数\n */\nfunction _multiply(n1: number, n2: number): number {\n  const l1 = getDecimalLength(n1);\n  const l2 = getDecimalLength(n2);\n  const s1 = n1.toString();\n  const s2 = n2.toString();\n  const m = 10 ** (l1 + l2);\n\n  return (Number(s1.replace('.', '')) * Number(s2.replace('.', ''))) / m;\n}\n\n/**\n * 除法运算\n *\n * @param n1 被除数\n * @param n2 除数\n */\nfunction _division(n1: number, n2: number): number {\n  const l1 = getDecimalLength(n1);\n  const l2 = getDecimalLength(n2);\n  const s1 = n1.toString();\n  const s2 = n2.toString();\n  const m = 10 ** (l2 - l1);\n\n  return _multiply(Number(s1.replace('.', '')) / Number(s2.replace('.', '')), m);\n}\n\n/**\n * 加法运算\n *\n * @param n1 被加数\n * @param n2 加数\n */\nfunction _add(n1: number, n2: number): number {\n  const l1 = getDecimalLength(n1);\n  const l2 = getDecimalLength(n2);\n  const m = 10 ** Math.max(l1, l2);\n\n  return (_multiply(n1, m) + _multiply(n2, m)) / m;\n}\n\n/**\n * 减法运算\n *\n * @param n1 被减数\n * @param n2 减数\n */\nfunction _minus(n1: number, n2: number): number {\n  const l1 = getDecimalLength(n1);\n  const l2 = getDecimalLength(n2);\n  const m = 10 ** Math.max(l1, l2);\n\n  return (_multiply(n1, m) - _multiply(n2, m)) / m;\n}\n\nexport const add = (n1: any, n2?: any) => layer(n1, n2, _add);\nexport const minus = (n1: any, n2?: any) => layer(n1, n2, _minus);\nexport const multiply = (n1: any, n2?: any) => layer(n1, n2, _multiply);\nexport const division = (n1: any, n2?: any) => layer(n1, n2, _division);\n"],"names":["getDecimalLength","num","toString","split","length","e","isNumber","Number","isNaN","parseFloat","layer","n1","n2","handler","TypeError","_multiply","l1","l2","s1","s2","m","replace","_division","_add","Math","max","_minus","add","minus","multiply","division"],"mappings":"AAEA;;;;;AAKA,SAASA,gBAAT,CAA0BC,GAA1B;MACM;WACKA,GAAG,CAACC,QAAJ,GAAeC,KAAf,CAAqB,GAArB,EAA0B,CAA1B,EAA6BC,MAApC;GADF,CAEE,OAAOC,CAAP,EAAU;WACH,CAAP;;;;;;;;;;;;;;;;;;;;;AAoBJ,SAASC,QAAT,CAAkBL,GAAlB;SACS,CAACM,MAAM,CAACC,KAAP,CAAaD,MAAM,CAACN,GAAD,CAAnB,CAAD,IAA8B,CAACM,MAAM,CAACC,KAAP,CAAaD,MAAM,CAACE,UAAP,CAAkBR,GAAlB,CAAb,CAAtC;;;;;;;;;;;;AAWF,SAASS,KAAT,CAAeC,EAAf,EAAwBC,EAAxB,EAAiCC,OAAjC;MACM,CAACP,QAAQ,CAACK,EAAD,CAAb,EAAmB;UACX,IAAIG,SAAJ,CAAc,qCAAd,CAAN;;;MAGE,OAAOF,EAAP,KAAc,WAAlB,EAA+B;WACtBL,MAAM,CAACI,EAAD,CAAb;;;MAGE,CAACL,QAAQ,CAACM,EAAD,CAAb,EAAmB;UACX,IAAIE,SAAJ,CAAc,sCAAd,CAAN;;;SAGKD,OAAO,CAACN,MAAM,CAACI,EAAD,CAAP,EAAaJ,MAAM,CAACK,EAAD,CAAnB,CAAd;;;;;;;;;;AASF,SAASG,SAAT,CAAmBJ,EAAnB,EAA+BC,EAA/B;MACQI,EAAE,GAAGhB,gBAAgB,CAACW,EAAD,CAA3B;MACMM,EAAE,GAAGjB,gBAAgB,CAACY,EAAD,CAA3B;MACMM,EAAE,GAAGP,EAAE,CAACT,QAAH,EAAX;MACMiB,EAAE,GAAGP,EAAE,CAACV,QAAH,EAAX;MACMkB,CAAC,YAAG,EAAH,EAAUJ,EAAE,GAAGC,EAAf,CAAP;SAEQV,MAAM,CAACW,EAAE,CAACG,OAAH,CAAW,GAAX,EAAgB,EAAhB,CAAD,CAAN,GAA8Bd,MAAM,CAACY,EAAE,CAACE,OAAH,CAAW,GAAX,EAAgB,EAAhB,CAAD,CAArC,GAA8DD,CAArE;;;;;;;;;;AASF,SAASE,SAAT,CAAmBX,EAAnB,EAA+BC,EAA/B;MACQI,EAAE,GAAGhB,gBAAgB,CAACW,EAAD,CAA3B;MACMM,EAAE,GAAGjB,gBAAgB,CAACY,EAAD,CAA3B;MACMM,EAAE,GAAGP,EAAE,CAACT,QAAH,EAAX;MACMiB,EAAE,GAAGP,EAAE,CAACV,QAAH,EAAX;MACMkB,CAAC,YAAG,EAAH,EAAUH,EAAE,GAAGD,EAAf,CAAP;SAEOD,SAAS,CAACR,MAAM,CAACW,EAAE,CAACG,OAAH,CAAW,GAAX,EAAgB,EAAhB,CAAD,CAAN,GAA8Bd,MAAM,CAACY,EAAE,CAACE,OAAH,CAAW,GAAX,EAAgB,EAAhB,CAAD,CAArC,EAA4DD,CAA5D,CAAhB;;;;;;;;;;AASF,SAASG,IAAT,CAAcZ,EAAd,EAA0BC,EAA1B;MACQI,EAAE,GAAGhB,gBAAgB,CAACW,EAAD,CAA3B;MACMM,EAAE,GAAGjB,gBAAgB,CAACY,EAAD,CAA3B;MACMQ,CAAC,YAAG,EAAH,EAASI,IAAI,CAACC,GAAL,CAAST,EAAT,EAAaC,EAAb,CAAT,CAAP;SAEO,CAACF,SAAS,CAACJ,EAAD,EAAKS,CAAL,CAAT,GAAmBL,SAAS,CAACH,EAAD,EAAKQ,CAAL,CAA7B,IAAwCA,CAA/C;;;;;;;;;;AASF,SAASM,MAAT,CAAgBf,EAAhB,EAA4BC,EAA5B;MACQI,EAAE,GAAGhB,gBAAgB,CAACW,EAAD,CAA3B;MACMM,EAAE,GAAGjB,gBAAgB,CAACY,EAAD,CAA3B;MACMQ,CAAC,YAAG,EAAH,EAASI,IAAI,CAACC,GAAL,CAAST,EAAT,EAAaC,EAAb,CAAT,CAAP;SAEO,CAACF,SAAS,CAACJ,EAAD,EAAKS,CAAL,CAAT,GAAmBL,SAAS,CAACH,EAAD,EAAKQ,CAAL,CAA7B,IAAwCA,CAA/C;;;AAGF,IAAaO,GAAG,GAAG,SAANA,GAAM,CAAChB,EAAD,EAAUC,EAAV;SAAuBF,KAAK,CAACC,EAAD,EAAKC,EAAL,EAASW,IAAT,CAA5B;CAAZ;AACP,IAAaK,KAAK,GAAG,SAARA,KAAQ,CAACjB,EAAD,EAAUC,EAAV;SAAuBF,KAAK,CAACC,EAAD,EAAKC,EAAL,EAASc,MAAT,CAA5B;CAAd;AACP,IAAaG,QAAQ,GAAG,SAAXA,QAAW,CAAClB,EAAD,EAAUC,EAAV;SAAuBF,KAAK,CAACC,EAAD,EAAKC,EAAL,EAASG,SAAT,CAA5B;CAAjB;AACP,IAAae,QAAQ,GAAG,SAAXA,QAAW,CAACnB,EAAD,EAAUC,EAAV;SAAuBF,KAAK,CAACC,EAAD,EAAKC,EAAL,EAASU,SAAT,CAA5B;CAAjB;;;;"}